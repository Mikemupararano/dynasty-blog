{% comment %}#Creating a base template{% endcomment %}
{% load blog_tags %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>
      {% block title %}

      {% endblock %}
    </title>

    <link rel="stylesheet" href="{% static 'blog/css/blog.css' %}" />
  </head>

  <body>
    <!-- ✅ Navigation Bar -->
    <nav class="navbar">
      <div class="wrapper">
        <div class="nav-left">
          <a href="{% url 'blog:post_list' %}" class="logo">The Ndikiye Family Blog</a>
        </div>
        <div class="nav-right">
          <a href="{% url 'blog:post_list' %}">Home</a>

          {% url 'blog:about' as about_url %}
          {% if about_url %}
            <a href="{{ about_url }}">About</a>
          {% endif %}

          {% url 'blog:contact' as contact_url %}
          {% if contact_url %}
            <a href="{{ contact_url }}">Contact</a>
          {% endif %}

          <a href="{% url 'blog:post_feed' %}">RSS</a>
        </div>
      </div>
    </nav>

    <div class="wrapper">
      <div id="content">
        {% block content %}

        {% endblock %}
      </div>

      <div id="sidebar">
        <h2>The Ndikiye Family Blog</h2>
        {% total_posts as total %}
        <p>
          Welcome to our family blog where we share our adventures, stories, and memories. Stay tuned for updates! I’ve written <strong>{{ total }}</strong> post{{ total|pluralize }} so far.
        </p>
        <p>
          <a href="{% url 'blog:post_feed' %}">Subscribe to our RSS feed</a>
        </p>

        <h3>Latest posts</h3>
        {% show_latest_posts 3 %}

        <h3>Most commented posts</h3>
        {% get_most_commented_posts as most_commented_posts %}
        <ul>
          {% for post in most_commented_posts %}
            <li>
              <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
              ({{ post.comments.count }} comments)
            </li>
          {% endfor %}
        </ul>

        <footer>
          <p>&copy; 2025 The Ndikiye Family Blog. All rights reserved.</p>
        </footer>
      </div>

      <div class="clearfix"></div>
    </div>
  </body>
</html>
